sequenceDiagram
  participant U as کاربر
  participant UI as رابط کاربری
  participant API as API
  participant Cache as حافظه نهان
  participant P1 as تأمین‌کننده ۱
  participant P2 as تأمین‌کننده ۲

  U->>UI: ثبت معیارهای جست‌وجو
  UI->>API: GET /search
  API->>Cache: بررسی نتیجه
  alt نتیجه در حافظه نهان موجود است
    Cache-->>API: نتیجه
  else نتیجه موجود نیست
    par تماس هم‌زمان
      API->>P1: درخواست جست‌وجو
      API->>P2: درخواست جست‌وجو
    end
    P1-->>API: نتیجه/خطا
    P2-->>API: نتیجه/خطا
    API->>Cache: ذخیره نتیجه با زمان اعتبار
  end
  API-->>UI: نتایج صفحه‌بندی
  UI-->>U: نمایش نتایج

